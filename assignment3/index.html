<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title> Assignment 3: Leaflet and JavaScript Project </title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/heatmap.js"></script>
    <script src="https://code.highcharts.com/modules/tilemap.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <style>
        header, footer { padding: 0.5em; color: white; background-color: DarkSlateGray; clear: none; text-align: center; justify-content: left}
         h1{color: White; text-align: center; background: none; font-size: 28px; font-family: Calibri;}
         h2 {color:Black; text-align: center; font-size: 24px; font-family: Calibri;}
         h3 {color:Black; text-align: center; font-size: 20px; font-family: Calibri;} 
         p { color:Black; margin: auto; text-align: center; font-size: 18px; font-family: Calibri; }
         a { color:Blue; margin: auto; text-align: center; font-size: 15px; font-family: Calibri; }
         div {vertical-align: middle;margin: auto}
         nav{text-align: center; margin: auto;}

#map {

     position:relative;
     width: 1000px;
     height: 600px;

}
#container {
    background-color: Floralwhite;
    width: 1000px;
    margin-right: auto;
    margin-left: auto;
   border-style: solid;
   border-width: 5px;

</style>
</head>
<header>
    <h1>CRP 558 WEB MAPPING/GIS <br> Assignment 3: Leaflet and JavaScript Project </h1>
</header>
<body>
  <br>
  <nav style="color: Beige">
        <a href="..">Home</a>&nbsp;&nbsp;
        <a href="../ex1/">Exercise 1</a>&nbsp;&nbsp;
        <a href="../ex2/">Exercise 2</a>&nbsp;&nbsp;
        <a href="../Ex3/">Exercise 3</a>&nbsp;&nbsp;
        <a href="../ex4/ex4/">Exercise 4</a>&nbsp;&nbsp;
        <a href="../ex5/">Exercise 5</a>&nbsp;&nbsp;
        <a href="../ex6/">Exercise 6</a>&nbsp;&nbsp;
        <a href="../ex7/">Exercise 7</a>&nbsp;&nbsp;
        <a href="../ex8/">Exercise 8</a>&nbsp;&nbsp;
        <a href="../ex9/">Exercise 9</a>&nbsp;&nbsp;
        <a href="../ex10/">Exercise 10</a>&nbsp;&nbsp;
        <a href="../ex11/">Exercise 11</a>
    </nav>
    <nav>
        <a class="colored_link" href="../Assignment1/assignment1.html">Assignment 1</a>&nbsp;&nbsp;
        <a class="colored_link" href="../Assignment2/index.html">Assignment 2</a>&nbsp;&nbsp;
        <a class="colored_link" href="../assignment3/index.html">Assignment 3</a>
    </nav>
<br>
<div id="container">
<div id='map'></div>
<script src="scriptmap.js" type="text/javascript"></script>
  </div>
  <div id="container">
<script type="text/javascript">
  $(document).ready(function(){
  //three (3) baselayers
var OpenTopoMap = L.tileLayer('http://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: 'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
});

var OpenStreetMap_Mapnik = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
});

var Hydda_Base = L.tileLayer('http://{s}.tile.openstreetmap.se/hydda/base/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: 'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
});

//setting the Map extent

var map = L.map('map', {
  center: [51.731094, -1.260656],
  zoom: 4,
  layers: [OpenStreetMap_Mapnik]
});
//Layer Control for basemap
var baseMaps = {
  "Topgraphic Map": OpenTopoMap,
    "Open Street Map": OpenStreetMap_Mapnik,
  "Hydrographic Map":Hydda_Base,
};
//Use of JSON
var cities = [{
    "name" : "London",
    "lat" : "51.5",
    "long" : "0.1",
    "iconImage" : "https://d30y9cdsu7xlg0.cloudfront.net/png/66270-200.png",
    "iconColor" : "0000ff",
    "popupText" : "The Capital OF England"
},
{
    "name" : "Paris",
    "lat" : "48.9",
    "long" : "2.25",
    "iconColor" : "ff0000",
    "iconImage" : "https://cdn4.iconfinder.com/data/icons/travel-2/500/Eiffel_eiffel_tower_France_landmark_Paris_travel-512.png",
    "popupText" : "The Caital of France "
}];

//Adding Json


 for (var i = 0; i < cities.length; i++) {


  console.log(cities[i].name);

  var marker = L.marker([cities[i].lat, cities[i].long], {
    icon: L.icon({
      iconUrl: cities[i].iconImage,
      iconSize:[120,70],
      iconAnchor:[60, 60],
      popupAnchor:[0, -20]
    }),
    title: cities[i].name
  }).bindPopup("<b>"+cities[i].name+"</b>"+":"+cities[i].popupText+".").addTo(map);
}
//
var myGeoJSON= [{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"marker-color":"#80ffff","marker-size":"medium","marker-symbol":"rail-light"},"geometry":{"type":"Point","coordinates":[8.573970794677734,50.04931318448308]}},{"type":"Feature","properties":{"marker-color":"#0000ff","marker-size":"medium","marker-symbol":"rail-light"},"geometry":{"type":"Point","coordinates":[2.1886825561523438,41.38737021318928]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[8.349609375,50.317408112618686],[8.3935546875,50.317408112618686],[8.3935546875,50.401515322782366],[8.349609375,50.401515322782366],[8.349609375,50.317408112618686]]]}},{"type":"Feature","properties":{"marker-color":"#400080","marker-size":"medium","marker-symbol":"airport"},"geometry":{"type":"Point","coordinates":[0.17578125,51.795027225829145]}},{"type":"Feature","properties":{"stroke":"#80ff80","stroke-width":3,"stroke-opacity":1},"geometry":{"type":"LineString","coordinates":[[2.021484375,43.004647127794435],[0.17578125,52.32191088594773],[8.0859375,51.28940590271679]]}},{"type":"Feature","properties":{"stroke":"#ff0000","stroke-width":3.5,"stroke-opacity":1},"geometry":{"type":"LineString","coordinates":[[8.349609375,50.84757295365389],[2.548828125,43.197167282501276]]}}]}]

// Polylines
var polylines = L.polyline([
  [48.8611111, 2.3363889],
  [41.906388,12.454444],
  [43.7769400,11.258730],
  [52.3600, 4.885277],
  [51.5194590,-0.1269310],
  [48.8611111, 2.3363889]

], {color: 'green'}).addTo(map);

//Pointmarkers

    var Louvre= L.marker([48.8611111, 2.3363889]).bindPopup('<a href="http://www.louvre.fr/en"> Louvre Museum </a>').addTo(map),
  British=L.marker([51.5194590,-0.1269310]).bindPopup('<a href="https://en.wikipedia.org/wiki/British_Museum"> The British Museum </a>'),
  Vatican=L.marker([41.906388,12.454444]).bindPopup('<a href="http://www.museivaticani.va/content/museivaticani/en.html"> The Vatican Museums </a>'),
  Galleria= L.marker([43.7769400,11.258730]).bindPopup('<a href="http://www.accademia.org/"> Galleria dell Accademia </a>'),
    Rijksmuseum=L.marker([52.3600, 4.885277]).bindPopup('<a href="https://www.rijksmuseum.nl/en"> The Rijksmuseum</a>').addTo(map);

  var europeMuseums = L.layerGroup([British, Vatican,Galleria]).addTo(map);
  
  var cow=L.geoJSON(myGeoJSON, {
      style: myStyle,
    }).addTo(map);

// Other layer controls
var overlays = {
  "Museums Road Tour Plan" :polylines,
  "Louvre Museum":Louvre,
  "The Rijksmuseum":Rijksmuseum,
  "GeoJSON" :cow,
  "Famous Museums": europeMuseums
}
 var myStyle = {
      "color": "red",
      "weight": 5,
      "opacity": 0.65,
    };


L.control.layers(baseMaps, overlays).addTo(map);
 });
</script>
  </div>
  <br>
  <div>
  <script type="text/javascript">

//setting map extent
var map = L.map('map').setView([37.6916159, -94.9964676], 4);
// add an OpenStreetMap tile layer
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: 'The map contributors',
    maxZoom: 18
}).addTo(map);

//data
var myPoints = [
        [5 ,38.841739, -105.042474, "Pikes Peak"],
        [5 ,44.428641, -110.588411, "Yellowstone National Park"],
        [8 ,43.664045, -114.664420, "Smoky Mountains"],
        [3 ,36.107772, -112.042613, "Grand Canynon"],
        [8 ,36.172518, -115.158422, "Las Vegas"],
        [8 ,40.689453, -74.044533, "Statue of Liberty"],
        [5 ,38.8894583,-77.0373601, "Washington Monument"],
        [3 ,28.385516, -81.563831, "Disney World, orlando"],
        [3 ,38.829061, -104.811980, "Colordao Springs"],
        [5, 36.570281, -117.056768, "Death Valley"],
];
//Priority Setting
var breaks = [3, 5, 8,]; 
var labels = ['Top Priority', 'Moderate', 'Below Moderate'];
//set color of marker function

function getColor(d) {
    return  d == '3' ? "#a1dab4" :
    d == '5' ? "#2c7fb8" :
    d == '8' ? "#41b6c4":
    "#FFFFFF";
}
for (var i = 0; i < myPoints.length; i++) {
    marker = new L.circleMarker([myPoints[i][1],myPoints[i][2]], {
    radius: myPoints[i][0]*5/2,
    fillColor: getColor(myPoints[i][0]), 
    color: "#000",
    stroke: true,
    weight: 1,
    opacity: 1,
    fillOpacity: 0.9   
})
.bindPopup(myPoints[i][3]) //note there is no comma here
.addTo(map);
}

var legend = L.control({position: 'bottomright'});
legend.onAdd = function (map) {
    var div = L.DomUtil.create('div', 'info legend');
    // loop through items and generate legend items each
    for (var i = 0; i < breaks.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getColor(breaks[i]) + ' "></i> ' +
            labels[i] + (breaks ? '' +  '<br>' : '');
    }
    return div;
};
legend.addTo(map);
</script>
</div>
<footer> <b>Rakibul Ahasan</b> <br> Department of Community and Regional Planning <br> Iowa State University <br> Ames, IA 50011. 
</footer>
</body>
</html>